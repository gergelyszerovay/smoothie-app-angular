**Story Number**: Story 1.3
**Story Title**: Implement Main Layout and State Management
**Goal**: Establish the core application structure and state management foundation with a hero section and centralized AIBD Simple Store for the Smoothie Recipe MVP
**Generated by:** Sonnet 4 (claude-sonnet-4-20250514)  
**Executed in:** Claude Code

## Story Summary

Story 1.3 establishes the foundational smart component and state management system for the entire Smoothie Recipe application. This story creates the MainLayoutContainer as the single smart component responsible for orchestrating all user interactions, along with a comprehensive AIBD Simple Store for managing recipe data, ingredient selection, and application state.

## Key Components Created

### Core Components
- **MainLayoutContainer**: Root smart component with application shell structure
- **HeroSection**: Introductory component displaying app title and description
- **MainLayoutStore**: AIBD Simple Store managing all application state

### Technical Implementation
- **DTO Type Definitions**: RecipeDTO, IngredientDTO, TagDTO matching JSON file structures
- **VM Type Definitions**: RecipeVM, IngredientVM, TagVM for UI-ready data
- **State Management**: Complete signalState implementation with computed selectors
- **Data Loading**: HTTP effects for fetching JSON files from assets directory
- **Recipe Filtering**: Logic to show recipes containing ALL selected ingredients

## Implementation Details

### State Management Architecture
- Follows AIBD Simple Store Pattern using @ngrx/signals
- Uses signalState for reactive state management
- Implements rxMethod effects for data loading operations
- Provides computed selectors for filteredRecipes and suggestedIngredients

### Data Flow Design
- Loads recipes.json, ingredients.json, and tags.json on application startup
- Converts DTO types to VM types with data enrichment
- Enriches recipe data with ingredient emojis and tag colors
- Maintains immutable state with readonly type definitions

### Component Structure
- MainLayoutContainer serves as single smart component
- HeroSection provides introductory content and app branding
- Components use OnPush change detection for optimal performance
- Inline templates and styles following Angular best practices

### Technical Requirements Fulfilled
- Blueprint compliance with angular-tailwind pattern
- Store design adherence to specification requirements  
- Responsive design with Tailwind CSS styling
- Accessibility features with ARIA attributes
- Error handling for data loading failures
- Loading states for improved user experience

## File Paths

### Primary Files Created
- `/workspace/aibd-vibe-specs/3-implementation/stories/story-1.3.md` - Complete story specification

### Implementation Files (To Be Created)
- `src/features/main-layout/main-layout-container.ts` - Root smart component
- `src/features/main-layout/internal/main-layout-store.ts` - AIBD Simple Store
- `src/features/main-layout/internal/hero-section.ts` - Hero section component
- `src/features/main-layout/internal/recipe-dto.ts` - Recipe DTO types
- `src/features/main-layout/internal/ingredient-dto.ts` - Ingredient DTO types
- `src/features/main-layout/internal/tag-dto.ts` - Tag DTO types

### Referenced Documentation
- `/workspace/aibd-vibe-specs/2-architecture/feature-level-prds/main-layout.md` - Feature PRD
- `/workspace/aibd-vibe-specs/2-architecture/store-designs/main-layout-store.md` - Store design
- `/workspace/aibd-vibe-specs/1-design/components/app/main-layout-container/main-layout-container.md` - Component spec
- `/workspace/aibd-vibe-specs/1-design/components/app/main-layout-container/hero-section/hero-section.md` - Hero section spec

## Quality Assurance

### Checklist Validation Completed
- ✅ Story identification and validation (Epic 1 approved, Story 1.2 done)
- ✅ Story content and structure (proper user story format)
- ✅ Acceptance criteria (all 7 criteria from epic included and refined)
- ✅ Technical implementation guidance (comprehensive direction provided)
- ✅ Task breakdown (detailed sequential tasks with clear dependencies)
- ✅ Reference and context (specific PRD and design document references)
- ✅ Documentation updates (no updates needed - existing docs align)
- ✅ Blueprint compliance (angular-tailwind pattern adherence verified)
- ✅ Documentation tracking (complete tracking in story file)
- ✅ File creation and output (story saved to correct location)

### Blueprint Compliance Verified
- PRD uses correct "Based on: angular-tailwind" format
- Angular component structure follows blueprint patterns
- Single-file components with inline templates and styles
- Smart component uses "-container" suffix naming
- Signal-based state management patterns specified
- Tailwind CSS styling approach documented
- AIBD directory structure conventions followed

## Ready for Implementation

This story is fully prepared for the implementation agent with:
- Complete acceptance criteria and technical requirements
- Detailed task breakdown with 26 specific subtasks
- Comprehensive technical guidance and architecture notes
- Blueprint-compliant implementation patterns
- Error handling and performance considerations
- Testing strategy and validation requirements

The story establishes the critical foundation for all subsequent features in the Smoothie Recipe MVP, enabling search functionality, recipe display, and modal interactions through centralized state management.